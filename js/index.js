var board=document.querySelector(".board");var clone=document.querySelector(".clone");var overlay=document.querySelector(".overlay");var reset=document.querySelector(".reset");var tileOptions=["erupt","ptero","tri","ahahah","egg","dino"];var state={selections:[],boardLocked:false,matches:0};reset.addEventListener("click",function(){if(state.boardLocked){return}resetGame()});function resetGame(){state.boardLocked=true;state.selections=[];state.matches=0;document.querySelectorAll(".cube").forEach(function(a){a.removeEventListener("click",function(){return selectTile(a)});a.remove()});overlay.classList.add("hidden");createBoard()}function createBoard(){var d=shuffleArray([].concat(tileOptions,tileOptions));var c=d.length;var a=function a(e){window.setTimeout(function(){board.appendChild(buildTile(d.pop(),e))},e*100)};for(var b=0;b<c;b++){a(b)}window.setTimeout(function(){document.querySelectorAll(".cube").forEach(function(e){e.addEventListener("click",function(){return selectTile(e)})});state.boardLocked=false},d.length*100)}function buildTile(b,a){var c=clone.cloneNode(true);c.classList.remove("clone");c.classList.add("cube");c.setAttribute("data-tile",b);c.setAttribute("data-id",a);return c}function selectTile(a){if(state.boardLocked||a.classList.contains("flipped")){return}state.boardLocked=true;if(state.selections.length<=1){a.classList.add("flipped");state.selections.push({id:a.dataset.id,tile:a.dataset.tile,el:a})}if(state.selections.length===2){if(state.selections[0].tile===state.selections[1].tile){window.setTimeout(function(){state.selections[0].el.classList.add("matched");state.selections[1].el.classList.add("matched");state.boardLocked=false;state.matches=state.matches+1;if(state.matches===tileOptions.length){window.setTimeout(function(){overlay.classList.remove("hidden");document.querySelector(".audio-win").play()},600)}state.selections=[];document.querySelector(".audio-"+a.dataset.tile).play()},600)}else{setTimeout(function(){document.querySelectorAll(".cube").forEach(function(b){b.classList.remove("flipped")});state.boardLocked=false},800);state.selections=[]}}else{state.boardLocked=false}}function shuffleArray(b){for(var c=b.length-1;c>0;c--){var d=Math.floor(Math.random()*(c+1));var a=[b[d],b[c]];b[c]=a[0];b[d]=a[1]}return b}createBoard();